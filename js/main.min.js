$(document).ready(function(){function mimite(){$("#divusers").load("querry_users.php"),$("#divusersnav").load("querry_users.php")}function charger(){var e=$("#tchat li:last").attr("id"),t=$("#thread").val(),i=$("#crypt").val();$.ajax({url:"charger.php?id="+e+"&thread="+t+"&crypt="+i,type:"GET",success:function(e){""!=e&&($("#tchat").append(e),$("#tchat").children(".dialogue").fadeTo("slow",1),$("body").scrollTop($("body")[0].scrollHeight))}})}function envoimessage(){message=$("#message").val(),thread=$("#thread").val(),crypt=$("#crypt").val(),""!=message&&""!=thread?$.post("upmsg.php",{message:message,thread:thread,crypt:crypt},function(e){$("#message").val("")}):Materialize.toast("Champ de text vide",4e3)}function share(){swal({title:"Partage",text:"<a href='https://twitter.com/share'  target='_blank' class='twitter-share-button' data-size='large' data-hashtags='prsm'>Tweet</a>",html:!0})}function info(){swal({title:"Prsm",text:"<p>Prsm est un tchat anonyme qui ne garde aucune donnée sur ses utilisateurs et leurs génére des identités aléatoire, sont utilisation est gratuite et illimité.</p><br>Le code source est disponible ici :<br> <a href='https://github.com/JL-Youk/prsm'>github.com/JL-Youk/prsm</a>",html:!0})}function resetname(){swal({title:"Tu es sûr?",text:"Votre identité actuelle sera définitivement suprimé",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Oui, je suprime!",closeOnConfirm:!1},function(){window.location.replace("reset.php"),swal("Suprimé!","identité effacé.","success")})}function getpulse(lastpulse){$.post("getpulse.php",{lastpulse:lastpulse,execptPulseTime:execptPulseTime},function(data){$("#response-div").html(data),$("#response-div").find("script").each(function(i){eval($(this).text())})})}function pulse(e){$.post("pulse.php",{id:e},function(e){execptPulseTime=e})}function funcgetpulse(){getpulse(date)}execptPulseID=0,execptPulseTime=0,$("#tchat").children(".dialogue").fadeTo("slow",1),$("#envoiMSG").click(function(e){envoimessage()}),$("#btnDiscution").click(function(e){ChangeDiscution()}),$("#btninfo").click(function(e){info()}),$("#btninfo2").click(function(e){info()}),$("#btnshare").click(function(e){share()}),$("#btnshare2").click(function(e){share()}),$("#btnDiscution2").click(function(e){ChangeDiscution()}),$("#newid").click(function(){resetname()}),$("#newid2").click(function(){resetname()}),$("body").keypress(function(e){13==e.which&&envoimessage()}),function(e,t,i){var n,s=e.getElementsByTagName(t)[0],a=/^http:/.test(e.location)?"http":"https";e.getElementById(i)||(n=e.createElement(t),n.id=i,n.src=a+"://platform.twitter.com/widgets.js",s.parentNode.insertBefore(n,s))}(document,"script","twitter-wjs"),$.fn.extend({animateCss:function(e){this.addClass("animated "+e).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated "+e)})}}),$("#tchat").on("click","li",function(){$(this).animateCss("animated pulseIn"),id=$(this).attr("id"),pulse(id)});var timer=setInterval(mimite,3e4),timercharger=setInterval(charger,5e3),timergetpulse=setInterval(funcgetpulse,5e3)});